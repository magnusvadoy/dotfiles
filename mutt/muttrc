# Paths
set certificate_file    = ~/.mutt/certificates                  # where to store certs
set header_cache        = ~/.mutt/cache/headers                 # where to store headers
set message_cachedir    = ~/.mutt/cache/bodies                  # where to store bodies
set mailcap_path        = ~/.mutt/mailcap                       # entrys for filetypes
set signature           = ~/.mutt/sig                           # my signature file
set tmpdir              = ~/.mutt/temp 

# Maildir settings
set mbox_type   = Maildir
set folder      = ~/Mail
set spoolfile   = "+Gmail/INBOX"
set mbox        = "+Gmail/[Gmail].All e-post"
set postponed   = "+Gmail/[Gmail].Utkast"
set editor      = "vim +:silent+?^$"                    # use vim and skip to last blank line

source ~/.mutt/mailboxes
source ~/.mutt/colors
# source ~/.vim/bundle/badwolf/contrib/badwolf.muttrc

# main options
set send_charset="iso-8859-1:utf-8"
set allow_8bit
set realname   = "Magnus Furnes Vad√∏y"
set from       = "magnus.f.vadoy@gmail.com"
set mail_check = 0
set envelope_from

unset move           # gmail does that
set delete           # don't ask, just do
unset confirmappend  # don't ask, just do!
set quit             # don't ask, just do!!
set wait_key = no		 # shut up, mutt
unset mark_old       # read/new is good enough for me

# sort/threading
set sort     = threads
set sort_aux = reverse-last-date-received
set sort_re

# look and feel
set pager_index_lines = 10
set pager_context     = 3
set pager_stop
set menu_scroll
set smart_wrap
set tilde
unset markers

auto_view text/html
alternative_order text/plain text/html

# composing 
set fcc_attach
unset mime_forward
set forward_format = "Fwd: %s"
set edit_headers                                                # show headers when composing
set fast_reply                                                  # skip to compose when replying
set include
set forward_quote

ignore *                               # first, ignore all headers
unignore from: to: cc: date: subject:  # then, show only these
hdr_order from: to: cc: date: subject: # and in this order

## Sidebar
set sidebar_width=20
set sidebar_visible=no
set sidebar_delim='|'

# which mailboxes to list in the sidebar
#mailboxes =inbox =ml

# color of folders with new mail
# color sidebar_new yellow default

bind index \CP sidebar-prev
bind index \CN sidebar-next
bind index \CO sidebar-open
bind pager \CP sidebar-prev
bind pager \CN sidebar-next
bind pager \CO sidebar-open

# b toggles sidebar visibility
macro index b '<enter-command>toggle sidebar_visible<enter>'
macro pager b '<enter-command>toggle sidebar_visible<enter>'

# Remap bounce-message function to "B"
bind index B bounce-message

bind index,pager \253 sidebar-prev
bind index,pager \252 sidebar-next

# SMTP Support
source ~/.muttpw
set my_user=magnus.f.vadoy@gmail.com
set smtp_url=smtps://$my_user:$my_pass@smtp.gmail.com
set ssl_force_tls = yes

### Macros
# Move a message to the trash
macro index D \
	"<save-message>+Gmail/[Gmail].Papirkurv<enter>" \
	"move message to the trash"

# Mark a message as spam
macro index S \
	"<save-message>+Gmail/[Gmail].Netts&APg-ppel<enter>" \
	"mark message as spam"

# Sync email
macro index O "<shell-escape>offlineimap -q -o<enter>"
macro index o "<shell-escape>offlineimap -qf INBOX<enter>"

# Saner copy/move dialogs
macro index C "<copy-message>?<toggle-mailboxes>" "copy a message to a mailbox"
macro index M "<save-message>?<toggle-mailboxes>" "move a message to a mailbox"
