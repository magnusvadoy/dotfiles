" vim: set filetype=tridactyl
" Theme
colorscheme gruvbox-material-dark-soft

" Search URLs
set searchurls.w http://en.wikipedia.org/w/index.php?title=Special%3ASearch&search=%s
set searchurls.g https://www.google.com/search?hl=en&q=%s
set searchurls.x https://x.com/search?q=%s
set searchurls.r https://www.reddit.com/search?q=%s
set searchurls.yt https://www.youtube.com/results?search_query=%s
set searchurls.gh https://github.com/search?q=%s
set searchurls.ddg https://duckduckgo.com/?q=%s&t=ffab&atb=v147-1&ia=web

" Enable smooth scrolling
set smoothscroll true

" Sane hinting mode
set hintfiltermode simple
set hintnames short

" Defaults to 300ms but I'm a 'move fast and close the wrong tabs' kinda chap
set hintdelay 100

" Only hint search results on Google and DDG
bindurl www.google.com f hint -Jc #search a
bindurl www.google.com F hint -Jbc #search a
bindurl ^https://duckduckgo.com f hint -Jc [data-testid="result-title-a"]
bindurl ^https://duckduckgo.com F hint -Jbc [data-testid="result-title-a"]

" Set up keybinds for search
bind / fillcmdline find
bind ? fillcmdline find -?
bind n findnext 1
bind N findnext -1

" Comment toggler for Reddit andHacker News
bind gc hint -Jc [class*="expand"],[class*="togg"],[class="comment_folder"]

" GitHub pull request checkout command to clipboard (only works if you're a collaborator or above)
bind yp composite js document.getElementById("clone-help-step-1").textContent.replace("git checkout -b", "git checkout -B").replace("git pull ", "git fetch ") + "git reset --hard " + document.getElementById("clone-help-step-1").textContent.split(" ")[3].replace("-","/") | yank

" Git{Hub,Lab} git clone via SSH yank
bind gy composite js "git clone " + document.location.href.replace(/https?:\/\//,"git@").replace("/",":").replace(/$/,".git") | clipboard yank

" make d take you to the left (I find it much less confusing)
bind d composite tabprev; tabclose #
bind D tabclose

" Handy multiwindow/multitasking binds
bind gd tabdetach
bind gD composite tabduplicate; tabdetach

" Disable on urls
blacklistadd https://mail.google.com
